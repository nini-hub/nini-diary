---
title: 网页渲染方式
date: '2020-12-07'
tags: ["小总结"]
published: true
---

### 单页 Web 应用（SPA - Single Page web Application）

理解：只有一个 HTML 文件的 Web 应用, 我们就称之为单页 Web 应用, 就称之为 SPA 应用

#### SPA 的特点

1. SPA 应用只有一个 HTML 文件, 所有的内容其实都在这个页面中呈现的

2. SPA 应用只会加载一次 HTML 文件, 不会因为用户的操作而进行页面的重新加载

3. 当用户与应用程序交互时, 是通过动态更新页面内容的方式来呈现不同的内容

#### SPA 优点

1. 有良好的交互体验

   不会重新加载整个网页, 只是局部更新

2. 前后端分离开发

   前端负责页面呈现和交互, 后端负责数据

3. 减轻服务器压力

   只用处理数据不用处理界面

4. 共用一套后端程序代码

#### SPA 缺点

1. SEO 难度较高

   只有一个界面, 无法针对不同的内容编写不同的 SEO 信息

2. 初次加载耗时多

   为实现单页 Web 应用功能及显示效果，需要在加载页面的时候将所有 JavaScript、CSS 统一加载，

### 如何解决单页面应用的 SEO 困难问题?

解决这个问题之前首先我们需要了解常见的三种网页渲染方式

#### 客户端渲染(CSR - Client Side Render)

后端只提供数据，前端做视图和交互逻辑(SPA 应用就是典型的客户端渲染)

##### 客户端渲染过程

1. 客户端请求 html (请求)

2. 服务端返回 html

3. 客户端渲染 HTML,找到依赖的 JS/CSS 文件

4. 客户端请求对应的 JS/CSS 文件 (请求)

5. 服务端返回对应的 JS/CSS 文件

6. 客户端等待 JS/CSS 文件下载完成

7. 客户端加载并初始化下载好的 JS 文件

8. 客户端执行 JS 代码向后端请求数据 (请求)

9. 服务端返回数据

10. 客户端利用服务端返回的数据填充网页

##### 优缺点

**最大优点:** 交互体验好可以做局部更新

**最大缺点:** 首屏加载慢(因为要等到 HTML 下载完才会去下载 JS/CSS, 要等到 JS 下载完初始化完才会去获取数据),

#### 服务端渲染(SSR - Server Side Render)

后端既提供数据又提供视图和交互逻辑

也就是服务器接到客户端请求之后，找到对应的数据并根据找到的数据生成对应的视图

然后将包含数据的视图一次性发给客户端，客户端直接将渲染即可

##### 服务端渲染过程

1. 客户端请求 html (请求)

2. 服务端内部查找对应的 html 文件和数据

3. 服务器内部根据数据 html 文件和数据生成完整网页

4. 服务端返回完整网页

5. 客户端渲染 HTML,找到依赖的 JS/CSS 文件

6. 客户端请求对应的 JS/CSS 文件 (请求)

7. 客户端等待 JS/CSS 文件下载完成

8. 客户直接展示网页

##### 优缺点

**最大优点:** 首屏加载快(因为服务器返回的网页已经包含数据, 所以之下载完 JS/CSS 就可以直接渲染)

​ 每次请求返回的都是一个独立完成的网页, 更利于 SEO

**最大缺点:**网络传输数据量大

#### 预渲染

无需服务器实时动态编译，采用预渲染，在构建时针对特定路由简单的生成静态 HTML 文件

本质就是客户端渲染, 只不过和 SPA 不同的是预渲染有多个界面

##### 优缺点

**最大优点:** 由于有多个界面, 所以更利于 SEO

**最大缺点:** 首屏加载慢, 预编译会非常的慢

#### 如何选择

1. 注重 SEO 的新闻、电商网站，建议采用服务器端渲染

2. 强交互的页面，不注重 SEO，采用客户端渲染

3. 两者之间, 只需改善少数页面的 SEO，采用预渲染
